require("tfw.binding.property-manager",function(t,e,n){function r(t){Object.defineProperty(this,"id",{value:d++,writable:!1,configurable:!1,enumerable:!0}),this.name=this.id,this._props={},this._container=t}function o(t,e){var n=this,r={value:void 0,event:new y,filter:s(e.filter),converter:s(e.converter),delay:p(e.delay),action:null,alwaysFired:!!e.alwaysFired,info:{manager:this,name:t},timeout:0};return r.get=i(r,e),r.set=a(r,e,n,t),this._props[t]=r,void 0!==e.init&&r.set(e.init),Object.defineProperty(this._container,t,{get:r.get.bind(r),set:n.change.bind(n,t),enumerable:!0,configurable:!1}),r}function i(t,e){return"function"==typeof e.get?function(n){var r=e.get(n);return u(t.info,r),r}:function(e){return t.value}}function a(t,e,n,r){return"function"==typeof e.cast?"function"==typeof e.set?function(r){var o=e.cast(r,n);u(t.info,t.value),e.set(o)}:function(r){t.value=e.cast(r,n),u(t.info,t.value)}:"function"==typeof e.set?e.set:function(e){t.value=e,u(t.info,t.value)}}function u(t,e){void 0!==e&&null!==e&&(e[h]=t)}function f(t,e){t.delay?(clearTimeout(t.timeout),t.timeout=setTimeout(e,t.delay)):e()}function c(t,e){throw e=void 0===e?"":"::"+e,Error("[tfw.binding.property-manager"+e+"] "+t)}function p(t){return"number"!=typeof t?0:isNaN(t)?0:Math.max(0,Math.floor(t))}function s(t){if("function"==typeof t)return t}function v(t,e){return t!==e}var l=function(){function e(){return r(n,arguments)}var n={en:{},fr:{}},r=t("$").intl;return e.all=n,e}(),y=t("tfw.event"),d=0,g="__tfw.property-manager__",h="__tfw.binding.property-manager__";r.prototype.set=function(t,e){this.create(t).set(e)},r.prototype.get=function(t){return this.create(t).get()},r.prototype.propertyId=function(t){return this.create(t).id},r.prototype.fire=function(t,e){var n=this.create(t);n.event.fire(n.get(),t,this._container,e)},r.prototype.change=function(t,e,n){void 0===n&&(n=[]);var r=this.create(t),o=r.converter;"function"==typeof o&&(e=o(e));var i=r.get();if(r.alwaysFired||v(e,i)){r.set(e);var a=this;f(r,function(){a.fire(t,n)})}},r.prototype.converter=function(t,e){var n=this.create(t);if("function"==typeof e)n.converter=e;else if(void 0!==e)throw Error("[tfw.binding.property-manager::converter] `converter` must be of type function or undefined!");return n.converter},r.prototype.delay=function(t,e){var n=this.create(t);if(e=parseFloat(e),isNaN(e))return n.delay;n.delay=e},r.prototype.on=function(t,e){this.create(t).event.add(e)},r.prototype.off=function(t,e){this.create(t).event.remove(e)},e.exports=function(t){void 0===t&&c("Argument `container` is mandatory!");var e=t[g];return e||(e=new r(t),t[g]=e),e},e.exports.isLinkable=function(t,e){return void 0!==t[g]&&("string"!=typeof e||void 0!==t[g]._props[e])},e.exports.getAllAttributesNames=function(t){return void 0===t[g]?[]:Object.keys(t[g]._props)},e.exports.getPropertyManager=function(t){var e=t[h];return e?e.manager:null},e.exports.getPropertyName=function(t){var e=t[h];return e?e.name:null},r.prototype.create=function(t,e){"string"!=typeof t&&c("propertyName must be a string!");var n=this._props[t];return n||(void 0===e&&(e={}),n=o.call(this,t,e)),n},r.prototype.createAction=function(t,e){return void 0===e&&(e={}),e.alwaysFired=!0,this.create(t,e)},e.exports._=l});
//# sourceMappingURL=tfw.binding.property-manager.js.map