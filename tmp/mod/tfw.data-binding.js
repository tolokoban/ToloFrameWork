{"intl":"","src":"/** @module tfw.data-binding */require( 'tfw.data-binding', function(exports, module) {  /**\n * @module tfw.data-binding\n *\n * @description\n * Provide all the functions needed for data-binding.\n *\n * @example\n * var mod = require('tfw.data-binding');\n */\nvar Listeners = require(\"tfw.listeners\");\n\n\nvar ID = '_tfw.data-binding_';\n\nvar converters = {\n    castBoolean: function(v) {\n        if (typeof v === 'boolean') return v;\n        if (typeof v === 'string') {\n            v = v.trim().toLowerCase();\n            if (v == '1' || v == 'true' || v == 'yes') {\n                return true;\n            } else {\n                return false;\n            }\n        }\n        if (typeof v === 'number') {\n            return v ? true : false;\n        }\n        return false;\n    },\n    castInteger: function(v) {\n        if (typeof v === 'number') {\n            return Math.floor( v );\n        }\n        if (typeof v === 'boolean') return v ? 1 : 0;\n        if (typeof v === 'string') {\n            return parseInt( v );\n        }\n        return Number.NaN;\n    },\n    castString: function(v) {\n        if (typeof v === 'string') return v;\n        return JSON.stringify( v );\n    }\n};\n\nfunction propCast( caster, obj, att, val ) {\n    if( typeof obj[ID] === 'undefined' ) obj[ID] = {};\n    obj[ID][att] = {\n        value: val,\n        event: new Listeners()\n    };\n    var setter;\n    if (typeof caster === 'function') {\n        setter = function(v) {\n            v = caster( v );\n            if( obj[ID][att].value !== v ) {\n                obj[ID][att].value = v;\n                obj[ID][att].event.fire( v, obj, att );\n            }\n        };\n    } else {\n        setter = function(v) {\n            if( obj[ID][att].value !== v ) {\n                obj[ID][att].value = v;\n                obj[ID][att].event.fire( v, obj, att );\n            }\n        };\n    }\n    Object.defineProperty( obj, att, {\n        get: function() { return obj[ID][att].value; },\n        set: setter,\n        configurable: false,\n        enumerable: true\n    });\n    return exports.bind.bind(exports, obj, att);\n};\n\nexports.fire = function( obj, att, val ) {\n    var currentValue = obj[att];\n    obj[att] = val;\n    if ( val === currentValue ) {\n        // If the value is the same, we must force the event firing.\n        obj[ID][att].event.fire( obj[att], obj, att );\n    }\n};\n\n/**\n * @param {object} obj - Object to which we want to add a property.\n * @param {string} att - Name of the attribute of `obj`.\n */\nexports.prop = propCast.bind( null, null );\n\nexports.propBoolean = propCast.bind( null, converters.castBoolean );\nexports.propInteger = propCast.bind( null, converters.castInteger );\nexports.propString = propCast.bind( null, converters.castString );\n\n\nexports.bind = function( srcObj, srcAtt, dstObj, dstAtt, options ) {\n    if( typeof srcObj[ID] === 'undefined' || typeof srcObj[ID][srcAtt] === 'undefined' ) {\n        console.error( srcAtt + \" is not a bindable property of \", srcObj );\n        throw Error( srcAtt + \" is not a bindable property!\" );\n    }\n\n    if( typeof options === 'undefined' ) options = {};\n\n    var lambda = typeof dstObj === 'function' ? dstObj : function(v, obj, att) {\n        dstObj[dstAtt] = typeof options.converter === 'function' ? options.converter(v) : v;\n    };\n    srcObj[ID][srcAtt].event.add( lambda );\n\n    return options;\n};\n\n\nexports.extend = function( def, ext, obj ) {\n    var out = JSON.parse( JSON.stringify( def ) );\n\n    var key, val;\n    for( key in ext ) {\n        val = ext[key];\n        if( typeof out[key] === 'undefined' ) {\n            console.error(\"[tfw.data-binding.extend] Undefined argument: `\" + key + \"`!\");\n        } else {\n            out[key] = val;\n        }\n    }\n\n    if (typeof obj !== 'undefined') {\n        for( key in out ) {\n            obj[key] = out[key];\n        }\n    }\n\n    return out;\n};\n\n\nexports.converters = converters;\n\n\n\n \n/**\n * @module tfw.data-binding\n * @see module:tfw.data-binding\n * @see module:tfw.listeners\n\n */\n});","zip":"require(\"tfw.data-binding\",function(e,n){function t(n,t,i,f){\"undefined\"==typeof t[o]&&(t[o]={}),t[o][i]={value:f,event:new r};var u;return u=\"function\"==typeof n?function(e){e=n(e),t[o][i].value!==e&&(t[o][i].value=e,t[o][i].event.fire(e,t,i))}:function(e){t[o][i].value!==e&&(t[o][i].value=e,t[o][i].event.fire(e,t,i))},Object.defineProperty(t,i,{get:function(){return t[o][i].value},set:u,configurable:!1,enumerable:!0}),e.bind.bind(e,t,i)}var r=require(\"tfw.listeners\"),o=\"_tfw.data-binding_\",i={castBoolean:function(e){return\"boolean\"==typeof e?e:\"string\"==typeof e?(e=e.trim().toLowerCase(),\"1\"==e||\"true\"==e||\"yes\"==e):\"number\"==typeof e?!!e:!1},castInteger:function(e){return\"number\"==typeof e?Math.floor(e):\"boolean\"==typeof e?e?1:0:\"string\"==typeof e?parseInt(e):Number.NaN},castString:function(e){return\"string\"==typeof e?e:JSON.stringify(e)}};e.fire=function(e,n,t){var r=e[n];e[n]=t,t===r&&e[o][n].event.fire(e[n],e,n)},e.prop=t.bind(null,null),e.propBoolean=t.bind(null,i.castBoolean),e.propInteger=t.bind(null,i.castInteger),e.propString=t.bind(null,i.castString),e.bind=function(e,n,t,r,i){if(\"undefined\"==typeof e[o]||\"undefined\"==typeof e[o][n])throw console.error(n+\" is not a bindable property of \",e),Error(n+\" is not a bindable property!\");\"undefined\"==typeof i&&(i={});var f=\"function\"==typeof t?t:function(e,n,o){t[r]=\"function\"==typeof i.converter?i.converter(e):e};return e[o][n].event.add(f),i},e.extend=function(e,n,t){var r,o,i=JSON.parse(JSON.stringify(e));for(r in n)o=n[r],\"undefined\"==typeof i[r]?console.error(\"[tfw.data-binding.extend] Undefined argument: `\"+r+\"`!\"):i[r]=o;if(\"undefined\"!=typeof t)for(r in i)t[r]=i[r];return i},e.converters=i});\n//# sourceMappingURL=tfw.data-binding.js.map","map":{"version":3,"file":"tfw.data-binding.js.map","sources":["tfw.data-binding.js"],"sourcesContent":["/** @module tfw.data-binding */require( 'tfw.data-binding', function(exports, module) {  /**\n * @module tfw.data-binding\n *\n * @description\n * Provide all the functions needed for data-binding.\n *\n * @example\n * var mod = require('tfw.data-binding');\n */\nvar Listeners = require(\"tfw.listeners\");\n\n\nvar ID = '_tfw.data-binding_';\n\nvar converters = {\n    castBoolean: function(v) {\n        if (typeof v === 'boolean') return v;\n        if (typeof v === 'string') {\n            v = v.trim().toLowerCase();\n            if (v == '1' || v == 'true' || v == 'yes') {\n                return true;\n            } else {\n                return false;\n            }\n        }\n        if (typeof v === 'number') {\n            return v ? true : false;\n        }\n        return false;\n    },\n    castInteger: function(v) {\n        if (typeof v === 'number') {\n            return Math.floor( v );\n        }\n        if (typeof v === 'boolean') return v ? 1 : 0;\n        if (typeof v === 'string') {\n            return parseInt( v );\n        }\n        return Number.NaN;\n    },\n    castString: function(v) {\n        if (typeof v === 'string') return v;\n        return JSON.stringify( v );\n    }\n};\n\nfunction propCast( caster, obj, att, val ) {\n    if( typeof obj[ID] === 'undefined' ) obj[ID] = {};\n    obj[ID][att] = {\n        value: val,\n        event: new Listeners()\n    };\n    var setter;\n    if (typeof caster === 'function') {\n        setter = function(v) {\n            v = caster( v );\n            if( obj[ID][att].value !== v ) {\n                obj[ID][att].value = v;\n                obj[ID][att].event.fire( v, obj, att );\n            }\n        };\n    } else {\n        setter = function(v) {\n            if( obj[ID][att].value !== v ) {\n                obj[ID][att].value = v;\n                obj[ID][att].event.fire( v, obj, att );\n            }\n        };\n    }\n    Object.defineProperty( obj, att, {\n        get: function() { return obj[ID][att].value; },\n        set: setter,\n        configurable: false,\n        enumerable: true\n    });\n    return exports.bind.bind(exports, obj, att);\n};\n\nexports.fire = function( obj, att, val ) {\n    var currentValue = obj[att];\n    obj[att] = val;\n    if ( val === currentValue ) {\n        // If the value is the same, we must force the event firing.\n        obj[ID][att].event.fire( obj[att], obj, att );\n    }\n};\n\n/**\n * @param {object} obj - Object to which we want to add a property.\n * @param {string} att - Name of the attribute of `obj`.\n */\nexports.prop = propCast.bind( null, null );\n\nexports.propBoolean = propCast.bind( null, converters.castBoolean );\nexports.propInteger = propCast.bind( null, converters.castInteger );\nexports.propString = propCast.bind( null, converters.castString );\n\n\nexports.bind = function( srcObj, srcAtt, dstObj, dstAtt, options ) {\n    if( typeof srcObj[ID] === 'undefined' || typeof srcObj[ID][srcAtt] === 'undefined' ) {\n        console.error( srcAtt + \" is not a bindable property of \", srcObj );\n        throw Error( srcAtt + \" is not a bindable property!\" );\n    }\n\n    if( typeof options === 'undefined' ) options = {};\n\n    var lambda = typeof dstObj === 'function' ? dstObj : function(v, obj, att) {\n        dstObj[dstAtt] = typeof options.converter === 'function' ? options.converter(v) : v;\n    };\n    srcObj[ID][srcAtt].event.add( lambda );\n\n    return options;\n};\n\n\nexports.extend = function( def, ext, obj ) {\n    var out = JSON.parse( JSON.stringify( def ) );\n\n    var key, val;\n    for( key in ext ) {\n        val = ext[key];\n        if( typeof out[key] === 'undefined' ) {\n            console.error(\"[tfw.data-binding.extend] Undefined argument: `\" + key + \"`!\");\n        } else {\n            out[key] = val;\n        }\n    }\n\n    if (typeof obj !== 'undefined') {\n        for( key in out ) {\n            obj[key] = out[key];\n        }\n    }\n\n    return out;\n};\n\n\nexports.converters = converters;\n\n\n\n \n});"],"names":["require","exports","module","propCast","caster","obj","att","val","ID","value","event","Listeners","setter","v","fire","Object","defineProperty","get","set","configurable","enumerable","bind","converters","castBoolean","trim","toLowerCase","castInteger","Math","floor","parseInt","Number","NaN","castString","JSON","stringify","currentValue","prop","propBoolean","propInteger","propString","srcObj","srcAtt","dstObj","dstAtt","options","console","error","Error","lambda","converter","add","extend","def","ext","key","out","parse"],"mappings":"AAA+BA,QAAS,mBAAoB,SAASC,EAASC,GA8C9E,QAASC,GAAUC,EAAQC,EAAKC,EAAKC,GACV,mBAAZF,GAAIG,KAAsBH,EAAIG,OACzCH,EAAIG,GAAIF,IACJG,MAAOF,EACPG,MAAO,GAAIC,GAEf,IAAIC,EAuBJ,OArBIA,GADkB,kBAAXR,GACE,SAASS,GACdA,EAAIT,EAAQS,GACRR,EAAIG,GAAIF,GAAKG,QAAUI,IACvBR,EAAIG,GAAIF,GAAKG,MAAQI,EACrBR,EAAIG,GAAIF,GAAKI,MAAMI,KAAMD,EAAGR,EAAKC,KAIhC,SAASO,GACVR,EAAIG,GAAIF,GAAKG,QAAUI,IACvBR,EAAIG,GAAIF,GAAKG,MAAQI,EACrBR,EAAIG,GAAIF,GAAKI,MAAMI,KAAMD,EAAGR,EAAKC,KAI7CS,OAAOC,eAAgBX,EAAKC,GACxBW,IAAK,WAAa,MAAOZ,GAAIG,GAAIF,GAAKG,OACtCS,IAAKN,EACLO,cAAc,EACdC,YAAY,IAETnB,EAAQoB,KAAKA,KAAKpB,EAASI,EAAKC,GAlE3C,GAAIK,GAAYX,QAAQ,iBAGpBQ,EAAK,qBAELc,GACAC,YAAa,SAASV,GAClB,MAAiB,iBAANA,GAAwBA,EAClB,gBAANA,IACPA,EAAIA,EAAEW,OAAOC,cACJ,KAALZ,GAAiB,QAALA,GAAoB,OAALA,GAMlB,gBAANA,KACAA,GAEJ,GAEXa,YAAa,SAASb,GAClB,MAAiB,gBAANA,GACAc,KAAKC,MAAOf,GAEN,iBAANA,GAAwBA,EAAI,EAAI,EAC1B,gBAANA,GACAgB,SAAUhB,GAEdiB,OAAOC,KAElBC,WAAY,SAASnB,GACjB,MAAiB,gBAANA,GAAuBA,EAC3BoB,KAAKC,UAAWrB,IAoC/BZ,GAAQa,KAAO,SAAUT,EAAKC,EAAKC,GAC/B,GAAI4B,GAAe9B,EAAIC,EACvBD,GAAIC,GAAOC,EACNA,IAAQ4B,GAET9B,EAAIG,GAAIF,GAAKI,MAAMI,KAAMT,EAAIC,GAAMD,EAAKC,IAQhDL,EAAQmC,KAAOjC,EAASkB,KAAM,KAAM,MAEpCpB,EAAQoC,YAAclC,EAASkB,KAAM,KAAMC,EAAWC,aACtDtB,EAAQqC,YAAcnC,EAASkB,KAAM,KAAMC,EAAWI,aACtDzB,EAAQsC,WAAapC,EAASkB,KAAM,KAAMC,EAAWU,YAGrD/B,EAAQoB,KAAO,SAAUmB,EAAQC,EAAQC,EAAQC,EAAQC,GACrD,GAA0B,mBAAfJ,GAAOhC,IAAqD,mBAAvBgC,GAAOhC,GAAIiC,GAEvD,KADAI,SAAQC,MAAOL,EAAS,kCAAmCD,GACrDO,MAAON,EAAS,+BAGH,oBAAZG,KAA0BA,KAErC,IAAII,GAA2B,kBAAXN,GAAwBA,EAAS,SAAS7B,EAAGR,EAAKC,GAClEoC,EAAOC,GAAuC,kBAAtBC,GAAQK,UAA2BL,EAAQK,UAAUpC,GAAKA,EAItF,OAFA2B,GAAOhC,GAAIiC,GAAQ/B,MAAMwC,IAAKF,GAEvBJ,GAIX3C,EAAQkD,OAAS,SAAUC,EAAKC,EAAKhD,GACjC,GAEIiD,GAAK/C,EAFLgD,EAAMtB,KAAKuB,MAAOvB,KAAKC,UAAWkB,GAGtC,KAAKE,IAAOD,GACR9C,EAAM8C,EAAIC,GACc,mBAAbC,GAAID,GACXT,QAAQC,MAAM,kDAAoDQ,EAAM,MAExEC,EAAID,GAAO/C,CAInB,IAAmB,mBAARF,GACP,IAAKiD,IAAOC,GACRlD,EAAIiD,GAAOC,EAAID,EAIvB,OAAOC,IAIXtD,EAAQqB,WAAaA"},"dependencies":["mod/tfw.data-binding","mod/tfw.listeners"]}