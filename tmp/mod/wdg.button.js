{"intl":"","src":"/** @module wdg.button */require( 'wdg.button', function(exports, module) {  var $ = require(\"dom\");\r\nvar DB = require(\"tfw.data-binding\");\r\n\r\nvar TYPES = ['standard', 'simple', 'warning', 'shadow', 'special'];\r\n\r\n/**\r\n * Liste des classes CSS applicables sur un bouton :\r\n * * __simple__ : Simple lien, sans l'aspect \"bouton\".\r\n * * __shadow__ : Bouton légèrement plus foncé.\r\n * * __warning__ : Bouton orangé pour indiquer une action potentiellement dangeureuse.\r\n * * __small__ : Bouton de petite taille (environ 70%).\r\n *\r\n * @param {object} opts\r\n * * {string} `value`: Text à afficher dans le bouton.\r\n * * {string} `href`: Si défini, lien vers lequel dirigier la page en cas de click.\r\n * * {boolean} `enabled`: Mettre `false` pour désactiver le bouton.\r\n * * {object} `email`: Associe le _Tap_ à l'envoi d'un mail.\r\n *   * {string} `to`: destinataire.\r\n *   * {string} `subject`: sujet du mail.\r\n *   * {string} `body`: corps du mail.\r\n *\r\n * @example\r\n * var Button = require(\"tp4.button\");\r\n * var instance = new Button();\r\n * @class Button\r\n */\r\nvar Button = function(opts) {\r\n    var that = this;\r\n\r\n    $.elem( this, typeof opts.href === 'string' ? 'a' : 'button', 'tfw-view-button', 'custom' );\r\n\r\n    DB.prop(this, 'value')(function(v) {\r\n        that.element.textContent = v;\r\n    });\r\n    DB.prop(this, 'type')(function(v) {\r\n        if (TYPES.indexOf( v ) == -1) {\r\n            console.error(\"[tfw.view.button.type] Unknown type: \\\"\" + v + \"\\\"!\");\r\n            that.type = TYPES[0];\r\n            return;\r\n        }\r\n        TYPES.forEach(function (type) {\r\n            $.removeClass(that.element, type);\r\n        });\r\n        $.addClass(that.element, v);\r\n    });\r\n    DB.prop(this, 'enabled')(function(v) {\r\n        if (v) {\r\n            $.removeAtt(that.element, 'disabled');\r\n        } else {\r\n            $.att(that.element, 'disabled', 'yes');\r\n        }\r\n    });\r\n    DB.prop(this, 'action', 0);\r\n\r\n    opts = DB.extend({\r\n        value: \"OK\",\r\n        enabled: true,\r\n        type: \"standard\"\r\n    }, opts);\r\n\r\n    this.enabled = opts.enabled;\r\n    this.value = opts.value;\r\n    this.type = opts.type;\r\n\r\n    // Animate the pressing.\r\n    $.on(this.element, {\r\n        down: function() {\r\n            if (that.enabled) {\r\n                $.addClass(that.element, 'press');\r\n            }\r\n        },\r\n        up: function() {\r\n            $.removeClass(that.element, 'press');\r\n        },\r\n        tap: function() {\r\n            that.action++;\r\n        },\r\n        keydown: function(evt) {\r\n            if (evt.keyCode == 13 || evt.keyCode == 32) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n                that.fire();\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * Simulate a click on the button if it is enabled.\r\n */\r\nButton.prototype.fire = function() {\r\n    if (this.enabled) this.action++;\r\n};\r\n\r\n/**\r\n * Disable the button and start a wait animation.\r\n */\r\nButton.prototype.waitOn = function(text) {\r\n    if (typeof text === 'undefined') text = this.caption();\r\n    this.enabled(false);\r\n    this.clear(W({size: '1em', caption: text}));\r\n};\r\n\r\n/**\r\n * Stop the wait animation and enable the button again.\r\n */\r\nButton.prototype.waitOff = function() {\r\n    this.caption(this.caption());\r\n    this.enabled(true);\r\n};\r\n\r\n\r\nfunction genericButton( id, classes, defaults ) {\r\n    var btn = new Button({ caption: _(id) });\r\n    if ( classes.length > 0 ) {\r\n        var i, cls;\r\n        for (i = 0 ; i < classes.length ; i++) {\r\n            cls = classes[i];\r\n            btn.addClass( cls );\r\n        }\r\n    } else {\r\n        if (typeof defaults === 'undefined') return btn;\r\n        if (!Array.isArray(defaults)) {\r\n            defaults = [defaults];\r\n        }\r\n        defaults.forEach(function (cls) {\r\n            btn.addClass( cls );\r\n        });\r\n    }\r\n    return btn;\r\n}\r\n\r\nButton.Cancel = function() { return genericButton('cancel', arguments); };\r\nButton.Close = function() { return genericButton('close', arguments, 'simple'); };\r\nButton.Delete = function() { return genericButton('delete', arguments, 'warning'); };\r\nButton.No = function() { return genericButton('no', arguments); };\r\nButton.Ok = function() { return genericButton('ok', arguments); };\r\nButton.Edit = function() { return genericButton('edit', arguments); };\r\nButton.Save = function() { return genericButton('save', arguments, 'warning'); };\r\nButton.Yes = function() { return genericButton('yes', arguments); };\r\n\r\nButton.default = {\r\n    caption: \"OK\",\r\n    type: \"default\"\r\n};\r\n\r\nmodule.exports = Button;\r\n\r\n\r\n\r\n \r\n/**\n * @module wdg.button\n * @see module:dom\n * @see module:tfw.data-binding\n * @see module:wdg.button\n\n */\n});","zip":"require(\"wdg.button\",function(e,t){function n(e,t,n){var i=new r({caption:_(e)});if(t.length>0){var o,a;for(o=0;o<t.length;o++)a=t[o],i.addClass(a)}else{if(\"undefined\"==typeof n)return i;Array.isArray(n)||(n=[n]),n.forEach(function(e){i.addClass(e)})}return i}var i=require(\"dom\"),o=require(\"tfw.data-binding\"),a=[\"standard\",\"simple\",\"warning\",\"shadow\",\"special\"],r=function(e){var t=this;i.elem(this,\"string\"==typeof e.href?\"a\":\"button\",\"tfw-view-button\",\"custom\"),o.prop(this,\"value\")(function(e){t.element.textContent=e}),o.prop(this,\"type\")(function(e){return-1==a.indexOf(e)?(console.error('[tfw.view.button.type] Unknown type: \"'+e+'\"!'),void(t.type=a[0])):(a.forEach(function(e){i.removeClass(t.element,e)}),void i.addClass(t.element,e))}),o.prop(this,\"enabled\")(function(e){e?i.removeAtt(t.element,\"disabled\"):i.att(t.element,\"disabled\",\"yes\")}),o.prop(this,\"action\",0),e=o.extend({value:\"OK\",enabled:!0,type:\"standard\"},e),this.enabled=e.enabled,this.value=e.value,this.type=e.type,i.on(this.element,{down:function(){t.enabled&&i.addClass(t.element,\"press\")},up:function(){i.removeClass(t.element,\"press\")},tap:function(){t.action++},keydown:function(e){13!=e.keyCode&&32!=e.keyCode||(e.preventDefault(),e.stopPropagation(),t.fire())}})};r.prototype.fire=function(){this.enabled&&this.action++},r.prototype.waitOn=function(e){\"undefined\"==typeof e&&(e=this.caption()),this.enabled(!1),this.clear(W({size:\"1em\",caption:e}))},r.prototype.waitOff=function(){this.caption(this.caption()),this.enabled(!0)},r.Cancel=function(){return n(\"cancel\",arguments)},r.Close=function(){return n(\"close\",arguments,\"simple\")},r.Delete=function(){return n(\"delete\",arguments,\"warning\")},r.No=function(){return n(\"no\",arguments)},r.Ok=function(){return n(\"ok\",arguments)},r.Edit=function(){return n(\"edit\",arguments)},r.Save=function(){return n(\"save\",arguments,\"warning\")},r.Yes=function(){return n(\"yes\",arguments)},r[\"default\"]={caption:\"OK\",type:\"default\"},t.exports=r});\n//# sourceMappingURL=wdg.button.js.map","map":{"version":3,"file":"wdg.button.js.map","sources":["wdg.button.js"],"sourcesContent":["/** @module wdg.button */require( 'wdg.button', function(exports, module) {  var $ = require(\"dom\");\r\nvar DB = require(\"tfw.data-binding\");\r\n\r\nvar TYPES = ['standard', 'simple', 'warning', 'shadow', 'special'];\r\n\r\n/**\r\n * Liste des classes CSS applicables sur un bouton :\r\n * * __simple__ : Simple lien, sans l'aspect \"bouton\".\r\n * * __shadow__ : Bouton légèrement plus foncé.\r\n * * __warning__ : Bouton orangé pour indiquer une action potentiellement dangeureuse.\r\n * * __small__ : Bouton de petite taille (environ 70%).\r\n *\r\n * @param {object} opts\r\n * * {string} `value`: Text à afficher dans le bouton.\r\n * * {string} `href`: Si défini, lien vers lequel dirigier la page en cas de click.\r\n * * {boolean} `enabled`: Mettre `false` pour désactiver le bouton.\r\n * * {object} `email`: Associe le _Tap_ à l'envoi d'un mail.\r\n *   * {string} `to`: destinataire.\r\n *   * {string} `subject`: sujet du mail.\r\n *   * {string} `body`: corps du mail.\r\n *\r\n * @example\r\n * var Button = require(\"tp4.button\");\r\n * var instance = new Button();\r\n * @class Button\r\n */\r\nvar Button = function(opts) {\r\n    var that = this;\r\n\r\n    $.elem( this, typeof opts.href === 'string' ? 'a' : 'button', 'tfw-view-button', 'custom' );\r\n\r\n    DB.prop(this, 'value')(function(v) {\r\n        that.element.textContent = v;\r\n    });\r\n    DB.prop(this, 'type')(function(v) {\r\n        if (TYPES.indexOf( v ) == -1) {\r\n            console.error(\"[tfw.view.button.type] Unknown type: \\\"\" + v + \"\\\"!\");\r\n            that.type = TYPES[0];\r\n            return;\r\n        }\r\n        TYPES.forEach(function (type) {\r\n            $.removeClass(that.element, type);\r\n        });\r\n        $.addClass(that.element, v);\r\n    });\r\n    DB.prop(this, 'enabled')(function(v) {\r\n        if (v) {\r\n            $.removeAtt(that.element, 'disabled');\r\n        } else {\r\n            $.att(that.element, 'disabled', 'yes');\r\n        }\r\n    });\r\n    DB.prop(this, 'action', 0);\r\n\r\n    opts = DB.extend({\r\n        value: \"OK\",\r\n        enabled: true,\r\n        type: \"standard\"\r\n    }, opts);\r\n\r\n    this.enabled = opts.enabled;\r\n    this.value = opts.value;\r\n    this.type = opts.type;\r\n\r\n    // Animate the pressing.\r\n    $.on(this.element, {\r\n        down: function() {\r\n            if (that.enabled) {\r\n                $.addClass(that.element, 'press');\r\n            }\r\n        },\r\n        up: function() {\r\n            $.removeClass(that.element, 'press');\r\n        },\r\n        tap: function() {\r\n            that.action++;\r\n        },\r\n        keydown: function(evt) {\r\n            if (evt.keyCode == 13 || evt.keyCode == 32) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n                that.fire();\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * Simulate a click on the button if it is enabled.\r\n */\r\nButton.prototype.fire = function() {\r\n    if (this.enabled) this.action++;\r\n};\r\n\r\n/**\r\n * Disable the button and start a wait animation.\r\n */\r\nButton.prototype.waitOn = function(text) {\r\n    if (typeof text === 'undefined') text = this.caption();\r\n    this.enabled(false);\r\n    this.clear(W({size: '1em', caption: text}));\r\n};\r\n\r\n/**\r\n * Stop the wait animation and enable the button again.\r\n */\r\nButton.prototype.waitOff = function() {\r\n    this.caption(this.caption());\r\n    this.enabled(true);\r\n};\r\n\r\n\r\nfunction genericButton( id, classes, defaults ) {\r\n    var btn = new Button({ caption: _(id) });\r\n    if ( classes.length > 0 ) {\r\n        var i, cls;\r\n        for (i = 0 ; i < classes.length ; i++) {\r\n            cls = classes[i];\r\n            btn.addClass( cls );\r\n        }\r\n    } else {\r\n        if (typeof defaults === 'undefined') return btn;\r\n        if (!Array.isArray(defaults)) {\r\n            defaults = [defaults];\r\n        }\r\n        defaults.forEach(function (cls) {\r\n            btn.addClass( cls );\r\n        });\r\n    }\r\n    return btn;\r\n}\r\n\r\nButton.Cancel = function() { return genericButton('cancel', arguments); };\r\nButton.Close = function() { return genericButton('close', arguments, 'simple'); };\r\nButton.Delete = function() { return genericButton('delete', arguments, 'warning'); };\r\nButton.No = function() { return genericButton('no', arguments); };\r\nButton.Ok = function() { return genericButton('ok', arguments); };\r\nButton.Edit = function() { return genericButton('edit', arguments); };\r\nButton.Save = function() { return genericButton('save', arguments, 'warning'); };\r\nButton.Yes = function() { return genericButton('yes', arguments); };\r\n\r\nButton.default = {\r\n    caption: \"OK\",\r\n    type: \"default\"\r\n};\r\n\r\nmodule.exports = Button;\r\n\r\n\r\n\r\n \r\n});"],"names":["require","exports","module","genericButton","id","classes","defaults","btn","Button","caption","_","length","i","cls","addClass","Array","isArray","forEach","$","DB","TYPES","opts","that","this","elem","href","prop","v","element","textContent","indexOf","console","error","type","removeClass","removeAtt","att","extend","value","enabled","on","down","up","tap","action","keydown","evt","keyCode","preventDefault","stopPropagation","fire","prototype","waitOn","text","clear","W","size","waitOff","Cancel","arguments","Close","Delete","No","Ok","Edit","Save","Yes"],"mappings":"AAAyBA,QAAS,aAAc,SAASC,EAASC,GAgHlE,QAASC,GAAeC,EAAIC,EAASC,GACjC,GAAIC,GAAM,GAAIC,IAASC,QAASC,EAAEN,IAClC,IAAKC,EAAQM,OAAS,EAAI,CACtB,GAAIC,GAAGC,CACP,KAAKD,EAAI,EAAIA,EAAIP,EAAQM,OAASC,IAC9BC,EAAMR,EAAQO,GACdL,EAAIO,SAAUD,OAEf,CACH,GAAwB,mBAAbP,GAA0B,MAAOC,EACvCQ,OAAMC,QAAQV,KACfA,GAAYA,IAEhBA,EAASW,QAAQ,SAAUJ,GACvBN,EAAIO,SAAUD,KAGtB,MAAON,GAjIkE,GAAIW,GAAIlB,QAAQ,OACzFmB,EAAKnB,QAAQ,oBAEboB,GAAS,WAAY,SAAU,UAAW,SAAU,WAuBpDZ,EAAS,SAASa,GAClB,GAAIC,GAAOC,IAEXL,GAAEM,KAAMD,KAA2B,gBAAdF,GAAKI,KAAoB,IAAM,SAAU,kBAAmB,UAEjFN,EAAGO,KAAKH,KAAM,SAAS,SAASI,GAC5BL,EAAKM,QAAQC,YAAcF,IAE/BR,EAAGO,KAAKH,KAAM,QAAQ,SAASI,GAC3B,MAA0B,IAAtBP,EAAMU,QAASH,IACfI,QAAQC,MAAM,yCAA4CL,EAAI,WAC9DL,EAAKW,KAAOb,EAAM,MAGtBA,EAAMH,QAAQ,SAAUgB,GACpBf,EAAEgB,YAAYZ,EAAKM,QAASK,SAEhCf,GAAEJ,SAASQ,EAAKM,QAASD,MAE7BR,EAAGO,KAAKH,KAAM,WAAW,SAASI,GAC1BA,EACAT,EAAEiB,UAAUb,EAAKM,QAAS,YAE1BV,EAAEkB,IAAId,EAAKM,QAAS,WAAY,SAGxCT,EAAGO,KAAKH,KAAM,SAAU,GAExBF,EAAOF,EAAGkB,QACNC,MAAO,KACPC,SAAS,EACTN,KAAM,YACPZ,GAEHE,KAAKgB,QAAUlB,EAAKkB,QACpBhB,KAAKe,MAAQjB,EAAKiB,MAClBf,KAAKU,KAAOZ,EAAKY,KAGjBf,EAAEsB,GAAGjB,KAAKK,SACNa,KAAM,WACEnB,EAAKiB,SACLrB,EAAEJ,SAASQ,EAAKM,QAAS,UAGjCc,GAAI,WACAxB,EAAEgB,YAAYZ,EAAKM,QAAS,UAEhCe,IAAK,WACDrB,EAAKsB,UAETC,QAAS,SAASC,GACK,IAAfA,EAAIC,SAAgC,IAAfD,EAAIC,UACzBD,EAAIE,iBACJF,EAAIG,kBACJ3B,EAAK4B,WASrB1C,GAAO2C,UAAUD,KAAO,WAChB3B,KAAKgB,SAAShB,KAAKqB,UAM3BpC,EAAO2C,UAAUC,OAAS,SAASC,GACX,mBAATA,KAAsBA,EAAO9B,KAAKd,WAC7Cc,KAAKgB,SAAQ,GACbhB,KAAK+B,MAAMC,GAAGC,KAAM,MAAO/C,QAAS4C,MAMxC7C,EAAO2C,UAAUM,QAAU,WACvBlC,KAAKd,QAAQc,KAAKd,WAClBc,KAAKgB,SAAQ,IAwBjB/B,EAAOkD,OAAS,WAAa,MAAOvD,GAAc,SAAUwD,YAC5DnD,EAAOoD,MAAQ,WAAa,MAAOzD,GAAc,QAASwD,UAAW,WACrEnD,EAAOqD,OAAS,WAAa,MAAO1D,GAAc,SAAUwD,UAAW,YACvEnD,EAAOsD,GAAK,WAAa,MAAO3D,GAAc,KAAMwD,YACpDnD,EAAOuD,GAAK,WAAa,MAAO5D,GAAc,KAAMwD,YACpDnD,EAAOwD,KAAO,WAAa,MAAO7D,GAAc,OAAQwD,YACxDnD,EAAOyD,KAAO,WAAa,MAAO9D,GAAc,OAAQwD,UAAW,YACnEnD,EAAO0D,IAAM,WAAa,MAAO/D,GAAc,MAAOwD,YAEtDnD,EAAAA,YACIC,QAAS,KACTwB,KAAM,WAGV/B,EAAOD,QAAUO"},"dependencies":["mod/dom","mod/tfw.data-binding","mod/wdg.button"]}