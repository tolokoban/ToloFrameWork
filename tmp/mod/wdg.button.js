{"intl":"","src":"/** @module wdg.button */require( 'wdg.button', function(exports, module) {  var $ = require(\"dom\");\r\nvar DB = require(\"tfw.data-binding\");\r\n\r\nvar TYPES = ['standard', 'simple', 'warning', 'shadow', 'special'];\r\n\r\n/**\r\n * Liste des classes CSS applicables sur un bouton :\r\n * * __simple__ : Simple lien, sans l'aspect \"bouton\".\r\n * * __shadow__ : Bouton légèrement plus foncé.\r\n * * __warning__ : Bouton orangé pour indiquer une action potentiellement dangereuse.\r\n * * __small__ : Bouton de petite taille (environ 70%).\r\n *\r\n * @param {object} opts\r\n * * {string} `value`: Text à afficher dans le bouton.\r\n * * {string} `href`: Si défini, lien vers lequel dirigier la page en cas de click.\r\n * * {boolean} `enabled`: Mettre `false` pour désactiver le bouton.\r\n * * {object} `email`: Associe le _Tap_ à l'envoi d'un mail.\r\n *   * {string} `to`: destinataire.\r\n *   * {string} `subject`: sujet du mail.\r\n *   * {string} `body`: corps du mail.\r\n *\r\n * @example\r\n * var Button = require(\"tp4.button\");\r\n * var instance = new Button();\r\n * @class Button\r\n */\r\nvar Button = function(opts) {\r\n    var that = this;\r\n\r\n    var elem = $.elem(this, typeof opts.href === 'string' ? 'a' : 'button', 'wdg-button');\r\n\r\n    DB.propString(this, 'text')(function(v) {\r\n        elem.textContent = v;\r\n    });\r\n    DB.prop(this, 'value');\r\n    DB.propEnum( TYPES )(this, 'type')(function(v) {\r\n        TYPES.forEach(function (type) {\r\n            $.removeClass(elem, type);\r\n        });\r\n        $.addClass(elem, v);\r\n    });\r\n    DB.propBoolean(this, 'enabled')(function(v) {\r\n        if (v) {\r\n            $.removeAtt(elem, 'disabled');\r\n        } else {\r\n            $.att(elem, 'disabled', 'yes');\r\n        }\r\n    });\r\n    DB.propBoolean(this, 'small')(function(v) {\r\n        if (v) {\r\n            $.addClass(elem, 'small');\r\n        } else {\r\n            $.removeClass(elem, 'small');\r\n        }\r\n    });\r\n    DB.prop(this, 'action', 0);\r\n\r\n    opts = DB.extend({\r\n        text: \"OK\",\r\n        value: \"action\",\r\n        small: false,\r\n        enabled: true,\r\n        wide: false,\r\n        visible: true,\r\n        type: \"standard\"\r\n    }, opts, this);\r\n\r\n    // Animate the pressing.\r\n    $.on(this.element, {\r\n        down: function() {\r\n            if (that.enabled) {\r\n                $.addClass(elem, 'press');\r\n            }\r\n        },\r\n        up: function() {\r\n            $.removeClass(elem, 'press');\r\n        },\r\n        tap: that.fire.bind( that ),\r\n        keydown: function(evt) {\r\n            if (evt.keyCode == 13 || evt.keyCode == 32) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n                that.fire();\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * Simulate a click on the button if it is enabled.\r\n */\r\nButton.prototype.fire = function() {\r\n    if (this.enabled) DB.fire( this, 'action', this.value );\r\n};\r\n\r\n/**\r\n * Disable the button and start a wait animation.\r\n */\r\nButton.prototype.waitOn = function(text) {\r\n    if (typeof text === 'undefined') text = this.caption();\r\n    this.enabled(false);\r\n    this.clear(W({size: '1em', caption: text}));\r\n};\r\n\r\n/**\r\n * Stop the wait animation and enable the button again.\r\n */\r\nButton.prototype.waitOff = function() {\r\n    this.caption(this.caption());\r\n    this.enabled(true);\r\n};\r\n\r\n\r\nfunction genericButton( id, classes, defaults ) {\r\n    var btn = new Button({ caption: _(id) });\r\n    if ( classes.length > 0 ) {\r\n        var i, cls;\r\n        for (i = 0 ; i < classes.length ; i++) {\r\n            cls = classes[i];\r\n            btn.addClass( cls );\r\n        }\r\n    } else {\r\n        if (typeof defaults === 'undefined') return btn;\r\n        if (!Array.isArray(defaults)) {\r\n            defaults = [defaults];\r\n        }\r\n        defaults.forEach(function (cls) {\r\n            btn.addClass( cls );\r\n        });\r\n    }\r\n    return btn;\r\n}\r\n\r\nButton.Cancel = function() { return genericButton('cancel', arguments); };\r\nButton.Close = function() { return genericButton('close', arguments, 'simple'); };\r\nButton.Delete = function() { return genericButton('delete', arguments, 'warning'); };\r\nButton.No = function() { return genericButton('no', arguments); };\r\nButton.Ok = function() { return genericButton('ok', arguments); };\r\nButton.Edit = function() { return genericButton('edit', arguments); };\r\nButton.Save = function() { return genericButton('save', arguments, 'warning'); };\r\nButton.Yes = function() { return genericButton('yes', arguments); };\r\n\r\nButton.default = {\r\n    caption: \"OK\",\r\n    type: \"default\"\r\n};\r\n\r\nmodule.exports = Button;\r\n\r\n\r\n\r\n \r\n/**\n * @module wdg.button\n * @see module:dom\n * @see module:tfw.data-binding\n * @see module:wdg.button\n\n */\n});","zip":"require(\"wdg.button\",function(t,e){function n(t,e,n){var i=new r({caption:_(t)});if(e.length>0){var o,a;for(o=0;o<e.length;o++)a=e[o],i.addClass(a)}else{if(\"undefined\"==typeof n)return i;Array.isArray(n)||(n=[n]),n.forEach(function(t){i.addClass(t)})}return i}var i=require(\"dom\"),o=require(\"tfw.data-binding\"),a=[\"standard\",\"simple\",\"warning\",\"shadow\",\"special\"],r=function(t){var e=this,n=i.elem(this,\"string\"==typeof t.href?\"a\":\"button\",\"wdg-button\");o.propString(this,\"text\")(function(t){n.textContent=t}),o.prop(this,\"value\"),o.propEnum(a)(this,\"type\")(function(t){a.forEach(function(t){i.removeClass(n,t)}),i.addClass(n,t)}),o.propBoolean(this,\"enabled\")(function(t){t?i.removeAtt(n,\"disabled\"):i.att(n,\"disabled\",\"yes\")}),o.propBoolean(this,\"small\")(function(t){t?i.addClass(n,\"small\"):i.removeClass(n,\"small\")}),o.prop(this,\"action\",0),t=o.extend({text:\"OK\",value:\"action\",small:!1,enabled:!0,wide:!1,visible:!0,type:\"standard\"},t,this),i.on(this.element,{down:function(){e.enabled&&i.addClass(n,\"press\")},up:function(){i.removeClass(n,\"press\")},tap:e.fire.bind(e),keydown:function(t){13!=t.keyCode&&32!=t.keyCode||(t.preventDefault(),t.stopPropagation(),e.fire())}})};r.prototype.fire=function(){this.enabled&&o.fire(this,\"action\",this.value)},r.prototype.waitOn=function(t){\"undefined\"==typeof t&&(t=this.caption()),this.enabled(!1),this.clear(W({size:\"1em\",caption:t}))},r.prototype.waitOff=function(){this.caption(this.caption()),this.enabled(!0)},r.Cancel=function(){return n(\"cancel\",arguments)},r.Close=function(){return n(\"close\",arguments,\"simple\")},r.Delete=function(){return n(\"delete\",arguments,\"warning\")},r.No=function(){return n(\"no\",arguments)},r.Ok=function(){return n(\"ok\",arguments)},r.Edit=function(){return n(\"edit\",arguments)},r.Save=function(){return n(\"save\",arguments,\"warning\")},r.Yes=function(){return n(\"yes\",arguments)},r[\"default\"]={caption:\"OK\",type:\"default\"},e.exports=r});\n//# sourceMappingURL=wdg.button.js.map","map":{"version":3,"file":"wdg.button.js.map","sources":["wdg.button.js"],"sourcesContent":["/** @module wdg.button */require( 'wdg.button', function(exports, module) {  var $ = require(\"dom\");\r\nvar DB = require(\"tfw.data-binding\");\r\n\r\nvar TYPES = ['standard', 'simple', 'warning', 'shadow', 'special'];\r\n\r\n/**\r\n * Liste des classes CSS applicables sur un bouton :\r\n * * __simple__ : Simple lien, sans l'aspect \"bouton\".\r\n * * __shadow__ : Bouton légèrement plus foncé.\r\n * * __warning__ : Bouton orangé pour indiquer une action potentiellement dangereuse.\r\n * * __small__ : Bouton de petite taille (environ 70%).\r\n *\r\n * @param {object} opts\r\n * * {string} `value`: Text à afficher dans le bouton.\r\n * * {string} `href`: Si défini, lien vers lequel dirigier la page en cas de click.\r\n * * {boolean} `enabled`: Mettre `false` pour désactiver le bouton.\r\n * * {object} `email`: Associe le _Tap_ à l'envoi d'un mail.\r\n *   * {string} `to`: destinataire.\r\n *   * {string} `subject`: sujet du mail.\r\n *   * {string} `body`: corps du mail.\r\n *\r\n * @example\r\n * var Button = require(\"tp4.button\");\r\n * var instance = new Button();\r\n * @class Button\r\n */\r\nvar Button = function(opts) {\r\n    var that = this;\r\n\r\n    var elem = $.elem(this, typeof opts.href === 'string' ? 'a' : 'button', 'wdg-button');\r\n\r\n    DB.propString(this, 'text')(function(v) {\r\n        elem.textContent = v;\r\n    });\r\n    DB.prop(this, 'value');\r\n    DB.propEnum( TYPES )(this, 'type')(function(v) {\r\n        TYPES.forEach(function (type) {\r\n            $.removeClass(elem, type);\r\n        });\r\n        $.addClass(elem, v);\r\n    });\r\n    DB.propBoolean(this, 'enabled')(function(v) {\r\n        if (v) {\r\n            $.removeAtt(elem, 'disabled');\r\n        } else {\r\n            $.att(elem, 'disabled', 'yes');\r\n        }\r\n    });\r\n    DB.propBoolean(this, 'small')(function(v) {\r\n        if (v) {\r\n            $.addClass(elem, 'small');\r\n        } else {\r\n            $.removeClass(elem, 'small');\r\n        }\r\n    });\r\n    DB.prop(this, 'action', 0);\r\n\r\n    opts = DB.extend({\r\n        text: \"OK\",\r\n        value: \"action\",\r\n        small: false,\r\n        enabled: true,\r\n        wide: false,\r\n        visible: true,\r\n        type: \"standard\"\r\n    }, opts, this);\r\n\r\n    // Animate the pressing.\r\n    $.on(this.element, {\r\n        down: function() {\r\n            if (that.enabled) {\r\n                $.addClass(elem, 'press');\r\n            }\r\n        },\r\n        up: function() {\r\n            $.removeClass(elem, 'press');\r\n        },\r\n        tap: that.fire.bind( that ),\r\n        keydown: function(evt) {\r\n            if (evt.keyCode == 13 || evt.keyCode == 32) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n                that.fire();\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * Simulate a click on the button if it is enabled.\r\n */\r\nButton.prototype.fire = function() {\r\n    if (this.enabled) DB.fire( this, 'action', this.value );\r\n};\r\n\r\n/**\r\n * Disable the button and start a wait animation.\r\n */\r\nButton.prototype.waitOn = function(text) {\r\n    if (typeof text === 'undefined') text = this.caption();\r\n    this.enabled(false);\r\n    this.clear(W({size: '1em', caption: text}));\r\n};\r\n\r\n/**\r\n * Stop the wait animation and enable the button again.\r\n */\r\nButton.prototype.waitOff = function() {\r\n    this.caption(this.caption());\r\n    this.enabled(true);\r\n};\r\n\r\n\r\nfunction genericButton( id, classes, defaults ) {\r\n    var btn = new Button({ caption: _(id) });\r\n    if ( classes.length > 0 ) {\r\n        var i, cls;\r\n        for (i = 0 ; i < classes.length ; i++) {\r\n            cls = classes[i];\r\n            btn.addClass( cls );\r\n        }\r\n    } else {\r\n        if (typeof defaults === 'undefined') return btn;\r\n        if (!Array.isArray(defaults)) {\r\n            defaults = [defaults];\r\n        }\r\n        defaults.forEach(function (cls) {\r\n            btn.addClass( cls );\r\n        });\r\n    }\r\n    return btn;\r\n}\r\n\r\nButton.Cancel = function() { return genericButton('cancel', arguments); };\r\nButton.Close = function() { return genericButton('close', arguments, 'simple'); };\r\nButton.Delete = function() { return genericButton('delete', arguments, 'warning'); };\r\nButton.No = function() { return genericButton('no', arguments); };\r\nButton.Ok = function() { return genericButton('ok', arguments); };\r\nButton.Edit = function() { return genericButton('edit', arguments); };\r\nButton.Save = function() { return genericButton('save', arguments, 'warning'); };\r\nButton.Yes = function() { return genericButton('yes', arguments); };\r\n\r\nButton.default = {\r\n    caption: \"OK\",\r\n    type: \"default\"\r\n};\r\n\r\nmodule.exports = Button;\r\n\r\n\r\n\r\n \r\n});"],"names":["require","exports","module","genericButton","id","classes","defaults","btn","Button","caption","_","length","i","cls","addClass","Array","isArray","forEach","$","DB","TYPES","opts","that","this","elem","href","propString","v","textContent","prop","propEnum","type","removeClass","propBoolean","removeAtt","att","extend","text","value","small","enabled","wide","visible","on","element","down","up","tap","fire","bind","keydown","evt","keyCode","preventDefault","stopPropagation","prototype","waitOn","clear","W","size","waitOff","Cancel","arguments","Close","Delete","No","Ok","Edit","Save","Yes"],"mappings":"AAAyBA,QAAS,aAAc,SAASC,EAASC,GAiHlE,QAASC,GAAeC,EAAIC,EAASC,GACjC,GAAIC,GAAM,GAAIC,IAASC,QAASC,EAAEN,IAClC,IAAKC,EAAQM,OAAS,EAAI,CACtB,GAAIC,GAAGC,CACP,KAAKD,EAAI,EAAIA,EAAIP,EAAQM,OAASC,IAC9BC,EAAMR,EAAQO,GACdL,EAAIO,SAAUD,OAEf,CACH,GAAwB,mBAAbP,GAA0B,MAAOC,EACvCQ,OAAMC,QAAQV,KACfA,GAAYA,IAEhBA,EAASW,QAAQ,SAAUJ,GACvBN,EAAIO,SAAUD,KAGtB,MAAON,GAlIkE,GAAIW,GAAIlB,QAAQ,OACzFmB,EAAKnB,QAAQ,oBAEboB,GAAS,WAAY,SAAU,UAAW,SAAU,WAuBpDZ,EAAS,SAASa,GAClB,GAAIC,GAAOC,KAEPC,EAAON,EAAEM,KAAKD,KAA2B,gBAAdF,GAAKI,KAAoB,IAAM,SAAU,aAExEN,GAAGO,WAAWH,KAAM,QAAQ,SAASI,GACjCH,EAAKI,YAAcD,IAEvBR,EAAGU,KAAKN,KAAM,SACdJ,EAAGW,SAAUV,GAAQG,KAAM,QAAQ,SAASI,GACxCP,EAAMH,QAAQ,SAAUc,GACpBb,EAAEc,YAAYR,EAAMO,KAExBb,EAAEJ,SAASU,EAAMG,KAErBR,EAAGc,YAAYV,KAAM,WAAW,SAASI,GACjCA,EACAT,EAAEgB,UAAUV,EAAM,YAElBN,EAAEiB,IAAIX,EAAM,WAAY,SAGhCL,EAAGc,YAAYV,KAAM,SAAS,SAASI,GAC/BA,EACAT,EAAEJ,SAASU,EAAM,SAEjBN,EAAEc,YAAYR,EAAM,WAG5BL,EAAGU,KAAKN,KAAM,SAAU,GAExBF,EAAOF,EAAGiB,QACNC,KAAM,KACNC,MAAO,SACPC,OAAO,EACPC,SAAS,EACTC,MAAM,EACNC,SAAS,EACTX,KAAM,YACPV,EAAME,MAGTL,EAAEyB,GAAGpB,KAAKqB,SACNC,KAAM,WACEvB,EAAKkB,SACLtB,EAAEJ,SAASU,EAAM,UAGzBsB,GAAI,WACA5B,EAAEc,YAAYR,EAAM,UAExBuB,IAAKzB,EAAK0B,KAAKC,KAAM3B,GACrB4B,QAAS,SAASC,GACK,IAAfA,EAAIC,SAAgC,IAAfD,EAAIC,UACzBD,EAAIE,iBACJF,EAAIG,kBACJhC,EAAK0B,WASrBxC,GAAO+C,UAAUP,KAAO,WAChBzB,KAAKiB,SAASrB,EAAG6B,KAAMzB,KAAM,SAAUA,KAAKe,QAMpD9B,EAAO+C,UAAUC,OAAS,SAASnB,GACX,mBAATA,KAAsBA,EAAOd,KAAKd,WAC7Cc,KAAKiB,SAAQ,GACbjB,KAAKkC,MAAMC,GAAGC,KAAM,MAAOlD,QAAS4B,MAMxC7B,EAAO+C,UAAUK,QAAU,WACvBrC,KAAKd,QAAQc,KAAKd,WAClBc,KAAKiB,SAAQ,IAwBjBhC,EAAOqD,OAAS,WAAa,MAAO1D,GAAc,SAAU2D,YAC5DtD,EAAOuD,MAAQ,WAAa,MAAO5D,GAAc,QAAS2D,UAAW,WACrEtD,EAAOwD,OAAS,WAAa,MAAO7D,GAAc,SAAU2D,UAAW,YACvEtD,EAAOyD,GAAK,WAAa,MAAO9D,GAAc,KAAM2D,YACpDtD,EAAO0D,GAAK,WAAa,MAAO/D,GAAc,KAAM2D,YACpDtD,EAAO2D,KAAO,WAAa,MAAOhE,GAAc,OAAQ2D,YACxDtD,EAAO4D,KAAO,WAAa,MAAOjE,GAAc,OAAQ2D,UAAW,YACnEtD,EAAO6D,IAAM,WAAa,MAAOlE,GAAc,MAAO2D,YAEtDtD,EAAAA,YACIC,QAAS,KACTsB,KAAM,WAGV7B,EAAOD,QAAUO"},"dependencies":["mod/dom","mod/tfw.data-binding","mod/wdg.button"]}