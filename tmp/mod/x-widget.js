{"intl":"","src":"/** @module x-widget */require( 'x-widget', function(exports, module) {  \"use strict\";\r\n\r\nvar DB = require(\"tfw.data-binding\");\r\n\r\nvar widgets = {};\r\n// Used for `onWidgetCreation()`.\r\nvar slots = {};\r\n\r\n\r\nvar Widget = function(id, modName, args) {\r\n    var dst = document.getElementById( id );\r\n    if (!dst) {\r\n        // This widget does not exist!\r\n        return;\r\n    }\r\n    var module = require( modName );\r\n    var wdg = new module( args );\r\n    var elem = typeof wdg.element === 'function' ? wdg.element() : wdg.element;\r\n    elem.setAttribute( 'id', id );\r\n    dst.parentNode.replaceChild( elem, dst );\r\n    register( id, wdg );\r\n};\r\n\r\nWidget.template = function( attribs ) {\r\n    var key, val, id, name = '', args = {};\r\n    for( key in attribs ) {\r\n        val = attribs[key];\r\n        if( key == 'name' ) {\r\n            name = val;\r\n        }\r\n        else if( key == 'id' ) {\r\n            id = val;\r\n        }\r\n        else if( key.charAt(0)=='$' ) {\r\n            args[key.substr( 1 )] = val;\r\n        }\r\n    }\r\n    var module = require( name );\r\n    var wdg = new module( args );\r\n    if( id ) {\r\n        register( id, wdg );\r\n    }\r\n\r\n    return typeof wdg.element === 'function' ? wdg.element() : (wdg.element || wdg);\r\n};\r\n\r\nfunction register( id, wdg ) {\r\n    widgets[id] = wdg;\r\n    var mySlots = slots[id];\r\n    console.info(\"[x-widget] widget creation=...\", id);\r\n    if( typeof mySlots !== 'undefined' ) {\r\n        window.setTimeout(function() {\r\n            mySlots.forEach(function (slot) {\r\n                slot( wdg );\r\n            });\r\n            delete slots[id];\r\n        });\r\n    }\r\n    return typeof wdg.element === 'function' ? wdg.element : (wdg.element || wdg);\r\n};\r\n\r\nWidget.getById = function( id ) {\r\n    if( !widgets[id] ) throw Error( \"[x-widget.getById()] ID not found: \" + id + \"!\" );\r\n    return widgets[id];\r\n};\r\n\r\nWidget.onWidgetCreation = function( id, slot ) {\r\n    if( typeof widgets[id] === 'undefined' ) {\r\n        if( typeof slots[id] === 'undefined' ) slots[id] = [slot];\r\n        else slots[id].push( slot );\r\n    } else {\r\n        // Asynchronous call to the slot\r\n        window.setTimeout(\r\n            function() {\r\n                slot( widgets[id] );\r\n            }\r\n        );\r\n    }\r\n};\r\n\r\nWidget.bind = function( id, attribs ) {\r\n    var dstObj = widgets[id];\r\n    var dstAtt, binding;\r\n    var srcObj, srcAtt;\r\n    for( dstAtt in attribs ) {\r\n        binding = attribs[dstAtt].B;\r\n        srcObj = widgets[binding[0]];\r\n        if( typeof srcObj === 'undefined' ) {\r\n            console.error( \"[x-widget:bind] Trying to bind attribute \\\"\" + dstAtt\r\n                         + \"\\\" of widget \\\"\" + id + \"\\\" to the unexisting widget \\\"\"\r\n                         + binding[0] + \"\\\"!\");\r\n            return;\r\n        }\r\n        srcAtt = binding[1];\r\n        DB.bind( srcObj, srcAtt, dstObj, dstAtt );\r\n    }\r\n};\r\n\r\nmodule.exports = Widget;\r\n\r\n\r\n\r\n \r\n/**\n * @module x-widget\n * @see module:tfw.data-binding\n * @see module:x-widget\n\n */\n});","zip":"require(\"x-widget\",function(e,t){\"use strict\";function n(e,t){o[e]=t;var n=r[e];return console.info(\"[x-widget] widget creation=...\",e),\"undefined\"!=typeof n&&window.setTimeout(function(){n.forEach(function(e){e(t)}),delete r[e]}),\"function\"==typeof t.element?t.element:t.element||t}var i=require(\"tfw.data-binding\"),o={},r={},d=function(e,t,i){var o=document.getElementById(e);if(o){var r=require(t),d=new r(i),u=\"function\"==typeof d.element?d.element():d.element;u.setAttribute(\"id\",e),o.parentNode.replaceChild(u,o),n(e,d)}};d.template=function(e){var t,i,o,r=\"\",d={};for(t in e)i=e[t],\"name\"==t?r=i:\"id\"==t?o=i:\"$\"==t.charAt(0)&&(d[t.substr(1)]=i);var u=require(r),f=new u(d);return o&&n(o,f),\"function\"==typeof f.element?f.element():f.element||f},d.getById=function(e){if(!o[e])throw Error(\"[x-widget.getById()] ID not found: \"+e+\"!\");return o[e]},d.onWidgetCreation=function(e,t){\"undefined\"==typeof o[e]?\"undefined\"==typeof r[e]?r[e]=[t]:r[e].push(t):window.setTimeout(function(){t(o[e])})},d.bind=function(e,t){var n,r,d,u,f=o[e];for(n in t){if(r=t[n].B,d=o[r[0]],\"undefined\"==typeof d)return void console.error('[x-widget:bind] Trying to bind attribute \"'+n+'\" of widget \"'+e+'\" to the unexisting widget \"'+r[0]+'\"!');u=r[1],i.bind(d,u,f,n)}},t.exports=d});\n//# sourceMappingURL=x-widget.js.map","map":{"version":3,"file":"x-widget.js.map","sources":["x-widget.js"],"sourcesContent":["/** @module x-widget */require( 'x-widget', function(exports, module) {  \"use strict\";\r\n\r\nvar DB = require(\"tfw.data-binding\");\r\n\r\nvar widgets = {};\r\n// Used for `onWidgetCreation()`.\r\nvar slots = {};\r\n\r\n\r\nvar Widget = function(id, modName, args) {\r\n    var dst = document.getElementById( id );\r\n    if (!dst) {\r\n        // This widget does not exist!\r\n        return;\r\n    }\r\n    var module = require( modName );\r\n    var wdg = new module( args );\r\n    var elem = typeof wdg.element === 'function' ? wdg.element() : wdg.element;\r\n    elem.setAttribute( 'id', id );\r\n    dst.parentNode.replaceChild( elem, dst );\r\n    register( id, wdg );\r\n};\r\n\r\nWidget.template = function( attribs ) {\r\n    var key, val, id, name = '', args = {};\r\n    for( key in attribs ) {\r\n        val = attribs[key];\r\n        if( key == 'name' ) {\r\n            name = val;\r\n        }\r\n        else if( key == 'id' ) {\r\n            id = val;\r\n        }\r\n        else if( key.charAt(0)=='$' ) {\r\n            args[key.substr( 1 )] = val;\r\n        }\r\n    }\r\n    var module = require( name );\r\n    var wdg = new module( args );\r\n    if( id ) {\r\n        register( id, wdg );\r\n    }\r\n\r\n    return typeof wdg.element === 'function' ? wdg.element() : (wdg.element || wdg);\r\n};\r\n\r\nfunction register( id, wdg ) {\r\n    widgets[id] = wdg;\r\n    var mySlots = slots[id];\r\n    console.info(\"[x-widget] widget creation=...\", id);\r\n    if( typeof mySlots !== 'undefined' ) {\r\n        window.setTimeout(function() {\r\n            mySlots.forEach(function (slot) {\r\n                slot( wdg );\r\n            });\r\n            delete slots[id];\r\n        });\r\n    }\r\n    return typeof wdg.element === 'function' ? wdg.element : (wdg.element || wdg);\r\n};\r\n\r\nWidget.getById = function( id ) {\r\n    if( !widgets[id] ) throw Error( \"[x-widget.getById()] ID not found: \" + id + \"!\" );\r\n    return widgets[id];\r\n};\r\n\r\nWidget.onWidgetCreation = function( id, slot ) {\r\n    if( typeof widgets[id] === 'undefined' ) {\r\n        if( typeof slots[id] === 'undefined' ) slots[id] = [slot];\r\n        else slots[id].push( slot );\r\n    } else {\r\n        // Asynchronous call to the slot\r\n        window.setTimeout(\r\n            function() {\r\n                slot( widgets[id] );\r\n            }\r\n        );\r\n    }\r\n};\r\n\r\nWidget.bind = function( id, attribs ) {\r\n    var dstObj = widgets[id];\r\n    var dstAtt, binding;\r\n    var srcObj, srcAtt;\r\n    for( dstAtt in attribs ) {\r\n        binding = attribs[dstAtt].B;\r\n        srcObj = widgets[binding[0]];\r\n        if( typeof srcObj === 'undefined' ) {\r\n            console.error( \"[x-widget:bind] Trying to bind attribute \\\"\" + dstAtt\r\n                         + \"\\\" of widget \\\"\" + id + \"\\\" to the unexisting widget \\\"\"\r\n                         + binding[0] + \"\\\"!\");\r\n            return;\r\n        }\r\n        srcAtt = binding[1];\r\n        DB.bind( srcObj, srcAtt, dstObj, dstAtt );\r\n    }\r\n};\r\n\r\nmodule.exports = Widget;\r\n\r\n\r\n\r\n \r\n});"],"names":["require","exports","module","register","id","wdg","widgets","mySlots","slots","console","info","window","setTimeout","forEach","slot","element","DB","Widget","modName","args","dst","document","getElementById","elem","setAttribute","parentNode","replaceChild","template","attribs","key","val","name","charAt","substr","getById","Error","onWidgetCreation","push","bind","dstAtt","binding","srcObj","srcAtt","dstObj","B","error"],"mappings":"AAAuBA,QAAS,WAAY,SAASC,EAASC,GAAW,YA8CzE,SAASC,GAAUC,EAAIC,GACnBC,EAAQF,GAAMC,CACd,IAAIE,GAAUC,EAAMJ,EAUpB,OATAK,SAAQC,KAAK,iCAAkCN,GACxB,mBAAZG,IACPI,OAAOC,WAAW,WACdL,EAAQM,QAAQ,SAAUC,GACtBA,EAAMT,WAEHG,GAAMJ,KAGS,kBAAhBC,GAAIU,QAAyBV,EAAIU,QAAWV,EAAIU,SAAWV,EAxD7E,GAAIW,GAAKhB,QAAQ,oBAEbM,KAEAE,KAGAS,EAAS,SAASb,EAAIc,EAASC,GAC/B,GAAIC,GAAMC,SAASC,eAAgBlB,EACnC,IAAKgB,EAAL,CAIA,GAAIlB,GAASF,QAASkB,GAClBb,EAAM,GAAIH,GAAQiB,GAClBI,EAA8B,kBAAhBlB,GAAIU,QAAyBV,EAAIU,UAAYV,EAAIU,OACnEQ,GAAKC,aAAc,KAAMpB,GACzBgB,EAAIK,WAAWC,aAAcH,EAAMH,GACnCjB,EAAUC,EAAIC,IAGlBY,GAAOU,SAAW,SAAUC,GACxB,GAAIC,GAAKC,EAAK1B,EAAI2B,EAAO,GAAIZ,IAC7B,KAAKU,IAAOD,GACRE,EAAMF,EAAQC,GACH,QAAPA,EACAE,EAAOD,EAEK,MAAPD,EACLzB,EAAK0B,EAEe,KAAfD,EAAIG,OAAO,KAChBb,EAAKU,EAAII,OAAQ,IAAOH,EAGhC,IAAI5B,GAASF,QAAS+B,GAClB1B,EAAM,GAAIH,GAAQiB,EAKtB,OAJIf,IACAD,EAAUC,EAAIC,GAGY,kBAAhBA,GAAIU,QAAyBV,EAAIU,UAAaV,EAAIU,SAAWV,GAkB/EY,EAAOiB,QAAU,SAAU9B,GACvB,IAAKE,EAAQF,GAAM,KAAM+B,OAAO,sCAAwC/B,EAAK,IAC7E,OAAOE,GAAQF,IAGnBa,EAAOmB,iBAAmB,SAAUhC,EAAIU,GACT,mBAAhBR,GAAQF,GACU,mBAAdI,GAAMJ,GAAsBI,EAAMJ,IAAOU,GAC/CN,EAAMJ,GAAIiC,KAAMvB,GAGrBH,OAAOC,WACH,WACIE,EAAMR,EAAQF,OAM9Ba,EAAOqB,KAAO,SAAUlC,EAAIwB,GACxB,GACIW,GAAQC,EACRC,EAAQC,EAFRC,EAASrC,EAAQF,EAGrB,KAAKmC,IAAUX,GAAU,CAGrB,GAFAY,EAAUZ,EAAQW,GAAQK,EAC1BH,EAASnC,EAAQkC,EAAQ,IACH,mBAAXC,GAIP,WAHAhC,SAAQoC,MAAO,6CAAgDN,EAChD,gBAAoBnC,EAAK,+BACzBoC,EAAQ,GAAK,KAGhCE,GAASF,EAAQ,GACjBxB,EAAGsB,KAAMG,EAAQC,EAAQC,EAAQJ,KAIzCrC,EAAOD,QAAUgB"},"dependencies":["mod/tfw.data-binding","mod/x-widget"]}