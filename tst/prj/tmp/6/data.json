{"needs":[],"includes":[],"timestamp":0,"tags":{"def":{"needs":[],"functions":{"start":{"comment":"*\n         * Start GPS acquiring.\n         ","args":[]},"startWatch":{"comment":"*\n         * Starting position watching.\n         ","args":[]},"getStatus":{"comment":"*\n         * @return Current status.\n         ","args":[]},"getPosition":{"comment":"*\n         * @return Last registred position.\n         ","args":[]},"onError":{"comment":"","args":["err"]}},"comment":"*\n * @created 11/01/2014\n *\n * status :\n *   0 = Not started.\n *   1 = PERMISSION DENIED\n *   2 = UNAVAILABLE POSITION\n *   3 = TIME OUT\n *   9 = device without GPS antenna\n *  10 = waiting for first point\n *  20 = waiting for next point\n *  30 = ok\n ","name":"tfw.Gps","singleton":true,"init":""},"zip":"window[\"TFW::tfw.Gps\"]={singleton:!0,signals:[\"Update\"],init:function(){this._statusText={0:\"Not started.\",1:\"PERMISSION DENIED\",2:\"UNAVAILABLE POSITION\",3:\"TIME OUT\",9:\"device without GPS antenna\",10:\"waiting for first point\",20:\"waiting for next point\",30:\"ok\"},this._status=0,this._position=null,this._gpsOptions={enableHighAccuracy:!0,maximumAge:0}},functions:{start:function(){var t=this;this._status=9,\"geolocation\"in navigator&&(this._status=10,navigator.geolocation.getCurrentPosition(function(i){console.info(\"[tfw.Gps] p=...\",i),t._position=i,t._status=20,t.fireUpdate(t),t.startWatch()},function(i){console.info(\"[tfw.Gps] err=...\",i),t.onError(i)})),this.fireUpdate(this)},startWatch:function(){var t=this;navigator.geolocation.watchPosition(function(i){t._position=i,t._status=30,t.fireUpdate(t)},function(i){t.onError(i)},this._gpsOptions)},getStatus:function(){return this._status},getPosition:function(){return this._position},onError:function(t){this._status=t.code,this.fireUpdate(this),alert(t.code+\": \\n\"+t.message)}}};"}}